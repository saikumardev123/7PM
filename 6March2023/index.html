<html>

<head>

</head>

<body>



    <input type="text" id="pid" placeholder="product id"> <br><br>
    <input type="text" id="name" placeholder="product name"> <br><br>
    <input type="text" id="price" placeholder="product price"> <br><br>
    <button id="addOrSave" onclick="addProduct()">Add Product</button>

    <ul id="list">

    </ul>

    <script>
        var productsList = [];
        function addProduct() {
            var pid = document.getElementById("pid").value;
            var name = document.getElementById("name").value;
            var price = document.getElementById("price").value;
            var product = {
                productId: pid,
                productName: name,
                productPrice: price
            }
            productsList.push(product);
            console.log(productsList);
            clearFields();
            showProducts();
        }

        function showProducts() {
            var index = 0;
            var listItems = "";
            while (index < productsList.length) {
                var product = productsList[index];
                listItems = listItems + "<li>" + product.productId + "&nbsp;&nbsp;&nbsp;" + product.productName + "&nbsp;&nbsp;&nbsp;" + product.productPrice + " &nbsp;&nbsp;&nbsp;<button onclick='deleteProduct(" + product.productId + ")'>delete</button>" + "&nbsp;&nbsp;&nbsp;<button onclick='updateProduct(" + product.productId + ")'>Update</button>" + "</li> <br><br>";
                index++;
            }
            document.getElementById("list").innerHTML = listItems;
        }
        function deleteProduct(productId) {
            console.log(productId);
            var index = 0;
            while (index < productsList.length) {
                var product = productsList[index];
                if (product.productId == productId) {
                    productsList.splice(index, 1);
                    break;
                }
                index++;
            }
            showProducts();
        }

        function updateProduct(productId) {
            console.log("productid", productId);
            var index = 0;
            while (index < productsList.length) {
                var product = productsList[index];
                if (product.productId == productId) {
                    document.getElementById("pid").value = productId;
                    document.getElementById("name").value = product.productName;
                    document.getElementById("price").value = product.productPrice;
                    break;
                }
                index++;
            }

            var addOrSave = document.getElementById("addOrSave");
            addOrSave.innerHTML = "Save Product";
            addOrSave.setAttribute('onclick', "saveProduct()");

        }

        function saveProduct() {
            // logic

            // capture the form data 
            // find the product from array based on pid
            // update the product with captured values 
            // togle the button from save to add
            // call show products 

        }


        function clearFields() {
            document.getElementById("pid").value = "";
            document.getElementById("name").value = "";
            document.getElementById("price").value = "";
        }
        /*
          1. clear all the fields once the product is added
          2. when we click on update, populate the product details
          in the form.
        */
    </script>
</body>

</html>